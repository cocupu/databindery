h1. CoCuPu

UGH: https://github.com/rails/rails/pull/2948#issuecomment-5832017

h2. TL;DR.

<pre>
  rabbitmq-server start
</pre>

<pre>
  rake db:create
  rake db:migrate
  rails g bindery:jetty
  rake jetty:start
  rake spec
  unicorn_rails
</pre>

h2. Dependencies

* postgres
* rabbitmq
* jetty

Only necessary for production system:
* mpg321 and vorbis-tools

h3. Installing Jetty

To install jetty run the generator:
<pre>rails g bindery:jetty</pre>
$ cp contrib/analysis-extras/lib/icu4j-4_8_1_1.jar lib/
$ cp contrib/analysis-extras/lucene-libs/*.jar lib/
$ cp contrib/velocity/lib/*.jar lib/

h2. Linux-specific notes for Prod server

# Install a javascript runtime (already installed on the Mac)
  See https://github.com/sstephenson/execjs
  I tried this one:
<pre>gem install therubyracer</pre>

# Install mp3 to ogg transcoding stuff:
  sudo apt-get install mpg321 vorbis-tools

h2. Running Server

<pre>
  unicorn_rails
</pre>

# Copy config/client_secrets.json.example to config/client_secrets.json and put in appropriate values.  Get the values from here: https://code.google.com/apis/console/b/3/?pli=1#project:840123515072:access


h2. Workers

h3. In production:

<pre>export RAILS_ENV=production; ./script/reify_worker</pre>
<pre>export RAILS_ENV=production; ./script/decompose_worker</pre>

h3. In development:

<pre>$ script/reify_worker</pre>
<pre>$ script/decompose_worker</pre>

